<xml>
	
	<set name="PLATFORM" value="android-10" if="android" />
	<set name="PLATFORM" value="android-14" if="HXCPP_X86" />
	<set name="HXCPP_CPP11" value="1" />
	
	<include name="${HXCPP}/build-tool/BuildCommon.xml" />
	
	<set name="ios" value="1" if="iphone" />
	
	<set name="LIME_OPENGL" value="1" />
	<set name="LIME_OPENAL" value="1" />
	<set name="LIME_CURL" value="1" />
	<set name="LIME_OGG" value="1" />
	<set name="LIME_SDL" value="1" />
	<set name="LIME_VORBIS" value="1" />
	<set name="LIME_ZLIB" value="1" />
	
	<set name="OUT_DIR" value="../ndll" unless="OUT_DIR" />
	<set name="LIB_PREFIX" value="lib" unless="LIB_PREFIX" />
	
	<set name="LIBCURL_SSL" value="1" />
	
	<include name="lib/al/include.xml" />
	<include name="lib/curl/include.xml" />
	<include name="lib/ogg/include.xml" />
	<include name="lib/sdl/include.xml" />
	<include name="lib/vorbis/include.xml" />
	<include name="lib/z/include.xml" />
	
	<target id="lime" output="${LIBPREFIX}lime${MSVC_LIB_VERSION}${DEBUGEXTRA}${LIBEXTRA}" tool="linker" toolid="${STD_MODULE_LINK}">
		
		<outdir name="${OUT_DIR}/${BINDIR}" />
		
		<files id="libal" if="LIME_OPENAL" unless="mac || iphone" />
		<files id="libcurl" if="LIME_CURL" />
		<files id="libogg" if="LIME_OGG" />
		<files id="libsdl" if="LIME_SDL" />
		<files id="libvorbis" if="LIME_VORBIS" />
		<files id="libz" if="LIME_ZLIB" />
		
		<section unless="static_link">
			
			<ext value=".so" />
			<ext value=".ndll" if="windows || mac || linux" />
			
			<section if="windows">
				
				<lib name="gdi32.lib" />
				<lib name="opengl32.lib" />
				<lib name="user32.lib" />
				<lib name="kernel32.lib" />
				<lib name="advapi32.lib" />
				<lib name="winmm.lib" />
				<lib name="imm32.lib"  />
				<lib name="ole32.lib" />
				<lib name="oleaut32.lib" />
				<lib name="version.lib" />
				<lib name="ws2_32.lib"  />
				<lib name="wldap32.lib" />
				<lib name="shell32.lib" />
				<lib name="comdlg32.lib" />
				
			</section>
			
			<section if="linux">
				
				<lib name="${HXCPP}/lib/${BINDIR}/liblinuxcompat.a" />
				<lib name="-lpthread" />
				<lib name="-lrt" />
				
			</section>
			
			<section if="mac">
				
				<vflag name="-l" value="iconv"/>
				<vflag name="-framework" value="IOKit" />
				<vflag name="-framework" value="Foundation" />
				<vflag name="-framework" value="CoreAudio" />
				<vflag name="-framework" value="Cocoa" />
				<vflag name="-framework" value="OpenGL" />
				<vflag name="-framework" value="AudioToolbox" />
				<vflag name="-framework" value="AudioUnit" />
				<vflag name="-framework" value="ForceFeedback" />
				<vflag name="-framework" value="Carbon" />
				<vflag name="-framework" value="AppKit" />
				<vflag name="-framework" value="OpenAL"/>
				
			</section>
		
			<section if="android">
				
				<lib name="-Wl,--undefined=Java_org_libsdl_app_SDLActivity_nativeInit" if="LUMEN_USE_SDL"/>
				<lib name="-ldl" />
				<lib name="-llog" />
				<lib name="-landroid" />
				<lib name="-lEGL" />
				<lib name="-lGLESv2" />
				<lib name="-lGLESv1_CM" />
				<lib name="-lOpenSLES" />
				
			</section>
			
		</section>
		
	</target>
	
	<target id="default">
		
		<target id="lime" />
		
	</target>
	
</xml>
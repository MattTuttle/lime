<xml>
	
	<set name="PLATFORM" value="android-10" if="android" />
	<set name="PLATFORM" value="android-14" if="HXCPP_X86" />
	<set name="HXCPP_CPP11" value="1" />
	
	<include name="${HXCPP}/build-tool/BuildCommon.xml" />
	
	<set name="ios" value="1" if="iphone" />
	
	<set name="LIME_OPENGL" value="1" />
	<set name="LIME_OPENAL" value="1" />
	<set name="LIME_CURL" value="1" />
	<set name="LIME_OGG" value="1" />
	<set name="LIME_SDL" value="1" />
	<set name="LIME_VORBIS" value="1" />
	<set name="LIME_ZLIB" value="1" />
	
	<set name="OUTPUT_DIR" value="../ndll" unless="OUTPUT_DIR" />
	<set name="NATIVE_LIB_PATH" value="lib" unless="NATIVE_LIB_PATH" />
	
	<set name="LIBCURL_SSL" value="1" />
	
	<files id="lime">
		
		<compilerflag value="-DLIME_SDL" if="LIME_SDL" />
		<compilerflag value="-Iinclude" />
		
		<file name="src/ExternalInterface.cpp" />
		
		<section if="LIME_SDL">
			
			<compilerflag value="-I${NATIVE_LIB_PATH}/sdl/include/" />
			<compilerflag value="-I${NATIVE_LIB_PATH}/sdl/include/configs/default/" unless="windows || mac || linux"/>
			<compilerflag value="-I${NATIVE_LIB_PATH}/sdl/include/configs/linux/" if="linux"/>
			<compilerflag value="-I${NATIVE_LIB_PATH}/sdl/include/configs/windows/" if="windows"/>
			<compilerflag value="-I${NATIVE_LIB_PATH}/sdl/include/configs/mac/" if="mac"/>
			
			<file name="src/backend/sdl/SDLApplication.cpp" />
			<file name="src/backend/sdl/SDLWindow.cpp" />
			<file name="src/backend/sdl/SDLRenderer.cpp" />
			
		</section>
		
		<section if="LIME_OPENGL">
			
			<file name="src/graphics/opengl/OpenGLBindings.cpp" />
			
		</section>
		
		<file name="src/app/RenderEvent.cpp" />
		<file name="src/app/UpdateEvent.cpp" />
		<file name="src/ui/KeyEvent.cpp" />
		<file name="src/ui/MouseEvent.cpp" />
		<file name="src/ui/TouchEvent.cpp" />
		<file name="src/ui/WindowEvent.cpp" />
		<file name="src/utils/ByteArray.cpp" />
		
	</files>
	
	<include name="lib/curl/include.xml" />
	<include name="lib/ogg/include.xml" />
	<include name="lib/openal/include.xml" />
	<include name="lib/sdl/include.xml" />
	<include name="lib/vorbis/include.xml" />
	<include name="lib/zlib/include.xml" />
	
	<target id="lime" output="${LIBPREFIX}lime${MSVC_LIB_VERSION}${DEBUGEXTRA}${LIBEXTRA}" tool="linker" toolid="${STD_MODULE_LINK}">
		
		<outdir name="${OUTPUT_DIR}/${BINDIR}" />
		
		<files id="lime" />
		
		<files id="native-curl" if="LIME_CURL" />
		<files id="native-ogg" if="LIME_OGG" />
		<files id="native-openal" if="LIME_OPENAL" unless="mac || iphone" />
		<files id="native-sdl" if="LIME_SDL" />
		<files id="native-vorbis" if="LIME_VORBIS" />
		<files id="native-zlib" if="LIME_ZLIB" />
		
		<section unless="static_link">
			
			<ext value=".so" />
			<ext value=".ndll" if="windows || mac || linux" />
			
			<section if="windows">
				
				<lib name="gdi32.lib" />
				<lib name="opengl32.lib" />
				<lib name="user32.lib" />
				<lib name="kernel32.lib" />
				<lib name="advapi32.lib" />
				<lib name="winmm.lib" />
				<lib name="imm32.lib"  />
				<lib name="ole32.lib" />
				<lib name="oleaut32.lib" />
				<lib name="version.lib" />
				<lib name="ws2_32.lib"  />
				<lib name="wldap32.lib" />
				<lib name="shell32.lib" />
				<lib name="comdlg32.lib" />
				
			</section>
			
			<section if="linux">
				
				<lib name="${HXCPP}/lib/${BINDIR}/liblinuxcompat.a" />
				<lib name="-lpthread" />
				<lib name="-lrt" />
				
			</section>
			
			<section if="mac">
				
				<vflag name="-l" value="iconv"/>
				<vflag name="-framework" value="IOKit" />
				<vflag name="-framework" value="Foundation" />
				<vflag name="-framework" value="CoreAudio" />
				<vflag name="-framework" value="Cocoa" />
				<vflag name="-framework" value="OpenGL" />
				<vflag name="-framework" value="AudioToolbox" />
				<vflag name="-framework" value="AudioUnit" />
				<vflag name="-framework" value="ForceFeedback" />
				<vflag name="-framework" value="Carbon" />
				<vflag name="-framework" value="AppKit" />
				<vflag name="-framework" value="OpenAL"/>
				
			</section>
		
			<section if="android">
				
				<lib name="-Wl,--undefined=Java_org_libsdl_app_SDLActivity_nativeInit" if="LIME_SDL"/>
				<lib name="-ldl" />
				<lib name="-llog" />
				<lib name="-landroid" />
				<lib name="-lEGL" />
				<lib name="-lGLESv2" />
				<lib name="-lGLESv1_CM" />
				<lib name="-lOpenSLES" />
				
			</section>
			
		</section>
		
	</target>
	
	<target id="default">
		
		<target id="lime" />
		
	</target>
	
</xml>